/*
	$('video').each(function() {
		var videoElement = $(this)[0];
		var isBlobLoaded = false; // Flag to track if blob is loaded
		var $overlay = $('<div class="video-overlay">Loading...</div>'); // Create a loading overlay
	
		$(videoElement).prop('controls', false); // Disable video controls initially
		$(this).parent().append($overlay);
	
		var sources = $(this).find('source');
		var promises = [];
	
		sources.each(function() {
			var sourceElement = $(this)[0];
			var videoURL = $(this).attr('src');
	
			var promise = fetch(videoURL)
				.then(response => response.blob())
				.then(videoBlob => {
					var videoObjectURL = URL.createObjectURL(videoBlob);
	
					// Set the src attribute of the source element to the URL
					$(sourceElement).attr('src', videoObjectURL);
				})
				.catch(error => {
					console.error('Failed to fetch video:', error);
				});
	
			promises.push(promise);
		});
	
		Promise.all(promises)
			.then(() => {
				if (!isBlobLoaded) {
					// Call the load method on the video element to update the sources
					videoElement.load();
					isBlobLoaded = true; // Update the flag
					$(videoElement).prop('controls', true); // Enable video controls
					$overlay.remove(); // Remove the loading overlay
				}
			});
	});
	*/

	// Get all the image elements on the page
	var images = $('img');

	images.each(function(index, img) {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", $(img).attr("src"), true);
		xhr.responseType = "blob";
		xhr.onload = function() {
		  if (this.status === 200) {
			var blob = this.response;
			$(img).attr("src", URL.createObjectURL(blob));
		  }
		};
		xhr.send();
	});
	// Add click event listeners to all the images
	images.click(function() {
		// Get the source of the clicked image
		var src = $(this).attr('src');

		// Create a new modal and append it to the body
		var modal = $(`<div class="modal">
		<div class="modal-dialog">
			<div class="modal-content">
				<img class="modal-img" src="${src}">
			</div>
		</div>
	</div>`);
		modal.appendTo('body');

		// Show the modal and overlay
		modal.show();
		$('body').css('overflow', 'hidden')
		// Add a click event listener to the close button and overlay to remove the modal and overlay from the body
		modal.click(function() {
			modal.hide();
			modal.remove();
			$('body').css('overflow', 'visible')
		});

	});

	const blurDivs = $(".blur-load");
	blurDivs.each(function() {
		const img = $(this).find("img");
		const loaded = () => {
			$(this).addClass('loaded');
		};
		if (img[0].complete) {
			loaded();
		} else {
			img.on('load', loaded);
		}
	});


	/*
    function acceptedFunctionalityCookie() {
        // Your code that should run after accepting cookies goes here
        var language = Cookies.get('language');
        console.log(language);

        switch (language) {
            case 'ES':
            case 'MX':
            case 'AR':
            case 'CO':
            case 'PE':
            case 'VE':
            case 'CL':
            case 'EC':
            case 'GT':
            case 'CU':
                if (window.location.pathname != '/es') {
                    window.location.href = `https://insane-bh.space/es?country=${language}`;
                }
                break;
            case 'US':
            case 'CA':
            case 'GB':
            case 'AU':
            case 'NZ':
            case 'IE':
            case 'ZA':
            case 'IN':
            case 'SG':
                if (window.location.pathname != '/') {
                    window.location.href = `https://insane-bh.space/?country=${language}`;
                }
                break;
            case 'JP':
                if (window.location.pathname != '/ja') {
                    window.location.href = `https://insane-bh.space/ja?country=${language}`;
                }
                break;
            case 'PT':
            case 'BR':
            case 'AO':
            case 'MZ':
            case 'CV':
            case 'GW':
            case 'ST':
            case 'GQ':
            case 'TL':
                if (window.location.pathname != '/pt') {
                    window.location.href = `https://insane-bh.space/pt?country=${language}`;
                }
                break;
            default:
                var hasDefaultCaseExecuted = false; // Flag to track if default case has executed

                // Get user's location using IP geolocation
                $.getJSON('https://ipapi.co/json/', function(data) {
                    var userCountry = data.country_code;
                    console.log(userCountry);

                    switch (userCountry) {
                        case 'US':
                        case 'CA':
                        case 'GB':
                        case 'AU':
                        case 'NZ':
                        case 'IE':
                        case 'ZA':
                        case 'IN':
                        case 'SG':
                            Cookies.set('language', userCountry, {
                                expires: 365,
                                path: '/',
                                domain: 'insane-bh.space',
                                secure: true,
                                sameSite: 'Strict',
                            });
                            window.location.href = `https://insane-bh.space/?country=${userCountry}`;
                            break;
                        case 'JP':
                            Cookies.set('language', userCountry, {
                                expires: 365,
                                path: '/ja',
                                domain: 'insane-bh.space',
                                secure: true,
                                sameSite: 'Strict',
                            });
                            window.location.href = `https://insane-bh.space/ja?country=${userCountry}`;
                            break;
                        case 'ES':
                        case 'MX':
                        case 'AR':
                        case 'CO':
                        case 'PE':
                        case 'VE':
                        case 'CL':
                        case 'EC':
                        case 'GT':
                        case 'CU':
                            Cookies.set('language', userCountry, {
                                expires: 365,
                                path: '/es',
                                domain: 'insane-bh.space',
                                secure: true,
                                sameSite: 'Strict',
                            });
                            window.location.href = `https://insane-bh.space/es?country=${userCountry}`;
                            break;
                        case 'PT':
                        case 'BR':
                        case 'AO':
                        case 'MZ':
                        case 'CV':
                        case 'GW':
                        case 'ST':
                        case 'GQ':
                        case 'TL':
                            Cookies.set('language', userCountry, {
                                expires: 365,
                                path: '/pt',
                                domain: 'insane-bh.space',
                                secure: true,
                                sameSite: 'Strict',
                            });
                            window.location.href = `https://insane-bh.space/pt?country=${userCountry}`;
                            break;
                        default:
                            if (hasDefaultCaseExecuted) {
                                // Default case already executed once, handle the situation accordingly
                                console.log('Country code not supported');
                                // You can display an error message to the user or redirect to a default URL
                            } else {
                                hasDefaultCaseExecuted = true; // Set the flag to indicate that the default case has executed
                                // Perform the redirection again
                                Cookies.set('language', userCountry, {
                                    expires: 365,
                                    path: '/',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/?country=${userCountry}`;
                            }
                            break;
                    }
                });
                break;
        }
    } 
    */


    <!--
                            <div class="slice-img"><div class="blur-load"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiB2aWV3Qm94PSIwIDAgNTAwIDUwMCI+DQogIDxyZWN0IGZpbGw9InRyYW5zcGFyZW50IiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIvPg0KICA8dGV4dCBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDI1NS41KSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGR5PSIxMC41IiBmb250LXdlaWdodD0iYm9sZCIgeD0iNTAlIiB5PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxvYWRpbmcuLi48L3RleHQ+DQo8L3N2Zz4=" data-src="./img/SEO_IMAGES/Ashnage-Birthday-min.webp" alt="Ash Party" loading="lazy"></div></div>
                            <div class="slice-img"><div class="blur-load"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiB2aWV3Qm94PSIwIDAgNTAwIDUwMCI+DQogIDxyZWN0IGZpbGw9InRyYW5zcGFyZW50IiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIvPg0KICA8dGV4dCBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDI1NS41KSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGR5PSIxMC41IiBmb250LXdlaWdodD0iYm9sZCIgeD0iNTAlIiB5PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxvYWRpbmcuLi48L3RleHQ+DQo8L3N2Zz4=" data-src="./img/SEO_IMAGES/chibi-min.webp" alt="Chibi" loading="lazy"></div></div>
                            <div class="slice-img"><div class="blur-load"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiB2aWV3Qm94PSIwIDAgNTAwIDUwMCI+DQogIDxyZWN0IGZpbGw9InRyYW5zcGFyZW50IiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIvPg0KICA8dGV4dCBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDI1NS41KSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGR5PSIxMC41IiBmb250LXdlaWdodD0iYm9sZCIgeD0iNTAlIiB5PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxvYWRpbmcuLi48L3RleHQ+DQo8L3N2Zz4=" data-src="./img/SEO_IMAGES/insane banner-min.webp" alt="The Squad" loading="lazy"></div></div>



                            <section class="middle-banner shuffle-section">
                                <div class="social-banner">
                                    <div class="row gx-0 h-100">
                                        <div class="col-sm-4 col-md-4 col-lg-4 d-flex justify-content-center align-items-center">
                                            <a class="link-to" href="https://twitter.com/INSaNE_BH" target="_blank" rel="noopener noreferrer">
                                                <div class="row gx-0">
                                                    <div class="col-sm-4 col-12 d-flex align-content-center justify-content-center"><span class="fw-bolder">TWITTER <i class="bi bi-twitter"></i></span></div>
                                                </div>
                                            </a>
                                        </div>
                                        <div class="col-sm-4 col-md-4 col-lg-4 d-flex justify-content-center align-items-center">
                                            <a class="link-to" href="#former-form" id="to-mail">
                                                <div class="row gx-0">
                                                    <div class="col-sm-4 col-12 d-flex align-content-center justify-content-center"><span class="fw-bolder">MAIL <i class="bi bi-envelope"></i></span></div>
                                                </div>
                                            </a>
                                        </div>
                                        <div class="col-sm-4 col-md-4 col-lg-4 d-flex justify-content-center align-items-center">
                                            <a class="link-to" href="https://discord.gg/EcfGKcSNYg" target="_blank" rel="noopener noreferrer">
                                                <div class="row gx-0">
                                                    <div class="col-sm-4 col-12 d-flex align-content-center justify-content-center"><span class="fw-bolder">DISCORD <i class="bi bi-discord"></i></span></div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            -->

                            /*function acceptedFunctionalityCookie() {
        // Your code that should run after accepting cookies goes here
        var language = Cookies.get('language');
        console.log(language);
    
        switch (language) {
            case 'ES':
            case 'MX':
            case 'AR':
            case 'CO':
            case 'PE':
            case 'VE':
            case 'CL':
            case 'EC':
            case 'GT':
            case 'CU':
                if (window.location.pathname !== '/es') {
                    window.location.href = `https://insane-bh.space/es?country=${language}`;
                }
                break;
            case 'US':
            case 'CA':
            case 'GB':
            case 'AU':
            case 'NZ':
            case 'IE':
            case 'ZA':
            case 'IN':
            case 'SG':
                if (window.location.pathname !== '/') {
                    window.location.href = `https://insane-bh.space/?country=${language}`;
                }
                break;
            case 'JP':
                if (window.location.pathname !== '/ja') {
                    window.location.href = `https://insane-bh.space/ja?country=${language}`;
                }
                break;
            case 'PT':
            case 'BR':
            case 'AO':
            case 'MZ':
            case 'CV':
            case 'GW':
            case 'ST':
            case 'GQ':
            case 'TL':
                if (window.location.pathname !== '/pt') {
                    window.location.href = `https://insane-bh.space/pt?country=${language}`;
                }
                break;
            default:
                
                try {
                    var hasDefaultCaseExecuted = false; // Flag to track if default case has executed
                    // Get user's location using IP geolocation
                        $.getJSON('https://ipapi.co/json/', function(data) {
                            var userCountry = data.country_code;
                            console.log(userCountry);
    
                            switch (userCountry) {
                                case 'US':
                                case 'CA':
                                case 'GB':
                                case 'AU':
                                case 'NZ':
                                case 'IE':
                                case 'ZA':
                                case 'IN':
                                case 'SG':
                                    if (language !== userCountry) {
                                        Cookies.set('language', userCountry, {
                                            expires: 365,
                                            path: '/',
                                            domain: 'insane-bh.space',
                                            secure: true,
                                            sameSite: 'Strict',
                                        });
                                        window.location.href = `https://insane-bh.space/?country=${userCountry}`;
                                    }
                                    break;
                                case 'JP':
                                    if (language !== userCountry) {
                                        Cookies.set('language', userCountry, {
                                            expires: 365,
                                            path: '/ja',
                                            domain: 'insane-bh.space',
                                            secure: true,
                                            sameSite: 'Strict',
                                        });
                                        window.location.href = `https://insane-bh.space/ja?country=${userCountry}`;
                                    }
                                    break;
                                case 'ES':
                                case 'MX':
                                case 'AR':
                                case 'CO':
                                case 'PE':
                                case 'VE':
                                case 'CL':
                                case 'EC':
                                case 'GT':
                                case 'CU':
                                    if (language !== userCountry) {
                                        Cookies.set('language', userCountry, {
                                            expires: 365,
                                            path: '/es',
                                            domain: 'insane-bh.space',
                                            secure: true,
                                            sameSite: 'Strict',
                                        });
                                        window.location.href = `https://insane-bh.space/es?country=${userCountry}`;
                                    }
                                    break;
                                case 'PT':
                                case 'BR':
                                case 'AO':
                                case 'MZ':
                                case 'CV':
                                case 'GW':
                                case 'ST':
                                case 'GQ':
                                case 'TL':
                                    if (language !== userCountry) {
                                        Cookies.set('language', userCountry, {
                                            expires: 365,
                                            path: '/pt',
                                            domain: 'insane-bh.space',
                                            secure: true,
                                            sameSite: 'Strict',
                                        });
                                        window.location.href = `https://insane-bh.space/pt?country=${userCountry}`;
                                    }
                                    break;
                                default:
                                    if (hasDefaultCaseExecuted) {
                                        // Default case already executed once, handle the situation accordingly
                                        console.log('Country code not supported');
                                        // You can display an error message to the user or redirect to a default URL
                                    } else {
                                        hasDefaultCaseExecuted = true; // Set the flag to indicate that the default case has executed
                                        // Perform the redirection again
                                        Cookies.set('language', userCountry, {
                                            expires: 365,
                                            path: '/',
                                            domain: 'insane-bh.space',
                                            secure: true,
                                            sameSite: 'Strict',
                                        });
                                        window.location.href = `https://insane-bh.space/?country=${userCountry}`;
                                    }
                                    break;
                            }
    
                    });
                } catch (error) {
                    // API failed to retrieve country code, fallback to browser language detection
                    var browserLanguage = navigator.language || navigator.userLanguage;
                    var browserLangCode = browserLanguage.split('-')[0].toLowerCase();
                    console.log(browserLangCode);
    
                    switch (browserLangCode) {
                        case 'es':
                            if (language !== 'ES') {
                                Cookies.set('language', 'ES', {
                                    expires: 365,
                                    path: '/es',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/es?country=ES`;
                            }
                            break;
                        case 'en':
                            if (language !== 'US') {
                                Cookies.set('language', 'US', {
                                    expires: 365,
                                    path: '/',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/?country=US`;
                            }
                            break;
                        case 'ja':
                            if (language !== 'JP') {
                                Cookies.set('language', 'JP', {
                                    expires: 365,
                                    path: '/ja',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/ja?country=JP`;
                            }
                            break;
                        case 'pt':
                            if (language !== 'PT') {
                                Cookies.set('language', 'PT', {
                                    expires: 365,
                                    path:'/pt',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/pt?country=PT`;
                            }
                            break;
                        default:
                            if (language !== 'US') {
                                Cookies.set('language', 'US', {
                                    expires: 365,
                                    path: '/',
                                    domain: 'insane-bh.space',
                                    secure: true,
                                    sameSite: 'Strict',
                                });
                                window.location.href = `https://insane-bh.space/?country=US`;
                            }
                            break;
                    }
                }
                break;
        }
    }*/


    /*
    class LazyImageLoader {
        constructor() {
            this.options = {
                root: null, // Use the viewport as the root
                rootMargin: '0px', // No margin
                threshold: 0.1 // Trigger when 10% of the image is visible
            };

            this.observer = new IntersectionObserver(this.handleIntersection.bind(this), this.options);
        }

        loadImages() {
            const images = $('img');
            const imagePromises = [];

            images.each((index, img) => {
                const dataSrc = $(img).attr('data-src');
                const dataModule = $(img).attr('data-module');
                const dataBlur = $(img).attr('data-blur');

                if (!dataSrc || (!dataModule && dataModule !== 'true')) {
                    // Skip images without data-src property
                    return;
                }

                $(img).on('dragstart', function() {
                    return false;
                })

                // Check if the image is already wrapped
                // Check if data-blur is set to true
                if (dataBlur === 'true' && !$(img).parent().hasClass('blur-load')) {
                    // Wrap the img tag inside a div with the class 'blur-load'
                    $(img).wrap('<div class="blur-load"></div>');
                }

                $(img).attr('src', 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiB2aWV3Qm94PSIwIDAgNTAwIDUwMCI+DQogIDxyZWN0IGZpbGw9InRyYW5zcGFyZW50IiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIvPg0KICA8dGV4dCBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDI1NS41KSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGR5PSIxMC41IiBmb250LXdlaWdodD0iYm9sZCIgeD0iNTAlIiB5PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxvYWRpbmcuLi48L3RleHQ+DQo8L3N2Zz4=')

                const promise = new Promise((resolve, reject) => {
                    this.observer.observe(img);

                    img.onload = function() {
                        resolve();
                    };

                    img.onerror = function() {
                        reject(new Error(`Failed to load image: ${img.src}`));
                    };
                });

                let downloadMSN;
                switch (window.location.href.split("?")[0]) {
                    case 'https://insane-bh.space':
                        downloadMSN = 'Download'
                        break;
                    case 'https://insane-bh.space/es':
                        downloadMSN = 'Descarga'
                        break;
                    case 'https://insane-bh.space/ja':
                        downloadMSN = 'ダウンロード'
                        break;
                    case 'https://insane-bh.space/pt':
                        downloadMSN = 'Baixar'
                        break;
                    default:
                        downloadMSN = 'Download'
                        break;
                }

                if (dataModule === 'true') {
                    $(img).click(function() {
                        const src = $(this).attr('src');
                        const modal = $(`
                        <div class="modal">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                <img class="modal-img img-fluid inherit" src="${src}" ondragstart="return false;">
                                <a class="download-btn" href="${src}" download>${downloadMSN}</a>
                                </div>
                            </div>
                        </div>
                        `);

                        modal.appendTo('body');

                        modal.show();
                        $('body').css('overflow', 'hidden');

                        modal.click(function() {
                            modal.hide();
                            modal.remove();
                            $('body').css('overflow', 'visible');
                        });
                    });
                }

                imagePromises.push(promise);
            });

            const blurDivs = $(".blur-load");

            blurDivs.each(function() {
                const img = $(this).find("img");

                const loaded = () => {
                    $(this).addClass('loaded');
                };

                if (img[0].complete) {
                    loaded();
                } else {
                    img.on('load', loaded);
                }
            });

            return imagePromises;
        }

        handleIntersection(entries, observer) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const imgElement = entry.target;
                    this.lazyLoadImage(imgElement);
                    observer.unobserve(imgElement);
                }
            });
        }

        lazyLoadImage(imgElement) {
            const src = $(imgElement).attr('data-src'); // Use data-src attribute instead of src

            // Skip the XHR request if the src attribute already contains a valid image URL
            if (src && (src.startsWith('data:') || src.startsWith('http://') || src.startsWith('https://'))) {
                const parentDiv = $(imgElement).parent();
                parentDiv.addClass('loaded');
                return Promise.resolve();
            }

            const xhr = new XMLHttpRequest();

            const promise = new Promise((resolve, reject) => {
                xhr.open('GET', src, true);
                xhr.responseType = 'blob';
                xhr.onload = function() {
                    if (this.status === 200) {
                        const blob = this.response;
                        $(imgElement).attr('src', URL.createObjectURL(blob));
                        resolve();
                    } else {
                        reject(new Error(`Failed to load image: ${src}`));
                    }
                };
                xhr.onerror = function() {
                    reject(new Error(`Failed to load image: ${src}`));
                };
                xhr.send();
            });

            promise
                .then(() => {
                    const parentDiv = $(imgElement).parent();
                    parentDiv.addClass('loaded');
                })
                .catch(error => {
                    console.error(error);
                });

            return promise;
        }
    }

    const lazyImageLoader = new LazyImageLoader();
    const imagePromises = lazyImageLoader.loadImages();

    Promise.all(imagePromises)
        .then(() => {
            console.log('All images loaded successfully');
        })
        .catch(error => {
            console.error('Failed to load images:', error);
        }); 
    */


    /*
        function acceptedFunctionalityCookie() {
        // Your code that should run after accepting cookies goes here
        var language = Cookies.get('language');
        console.log(language);
    
        switch (language) {
            case 'ES':
            case 'MX':
            case 'AR':
            case 'CO':
            case 'PE':
            case 'VE':
            case 'CL':
            case 'EC':
            case 'GT':
            case 'CU':
                if (window.location.pathname !== '/es') {
                    window.location.href = `https://insane-bh.space/es?country=${language}`;
                }
                break;
            case 'US':
            case 'CA':
            case 'GB':
            case 'AU':
            case 'NZ':
            case 'IE':
            case 'ZA':
            case 'IN':
            case 'SG':
                if (window.location.pathname !== '/') {
                    window.location.href = `https://insane-bh.space/?country=${language}`;
                }
                break;
            case 'JP':
                if (window.location.pathname !== '/ja') {
                    window.location.href = `https://insane-bh.space/ja?country=${language}`;
                }
                break;
            case 'PT':
            case 'BR':
            case 'AO':
            case 'MZ':
            case 'CV':
            case 'GW':
            case 'ST':
            case 'GQ':
            case 'TL':
                if (window.location.pathname !== '/pt') {
                    window.location.href = `https://insane-bh.space/pt?country=${language}`;
                }
                break;
            default:
                // Get user's location using IP geolocation
                $.getJSON('https://ipapi.co/json/')
                    .done(function(data) {
                        var userCountry = data.country_code;
                        console.log(userCountry);
            
                        // Perform redirection based on user's country
                        performRedirection(userCountry, language);
                    })
                    .fail(function(jqXHR, textStatus, errorThrown) {
                        console.error('Failed to retrieve country code:', textStatus, errorThrown);
                        
                        // API failed to retrieve country code, fallback to browser language detection
                        var browserLanguage = navigator.language || navigator.userLanguage;
                        var browserLangCode = browserLanguage.split('-')[0].toUpperCase();
                        console.log(browserLangCode);
            
                        // Perform redirection based on browser's language
                        performRedirection(browserLangCode, language);
                    });
                break;
        }
    }
    
    function performRedirection(userCountry, language) {
        var hasDefaultCaseExecuted = false; // Flag to track if default case has executed
        switch (userCountry) {
            case 'US':
            case 'CA':
            case 'GB':
            case 'AU':
            case 'NZ':
            case 'IE':
            case 'ZA':
            case 'IN':
            case 'SG':
                if (language !== userCountry) {
                    redirectToCountry('https://insane-bh.space/?country=', userCountry);
                }
                break;
            case 'JP':
                if (language !== userCountry) {
                    redirectToCountry('https://insane-bh.space/ja?country=', userCountry);
                }
                break;
            case 'ES':
            case 'MX':
            case 'AR':
            case 'CO':
            case 'PE':
            case 'VE':
            case 'CL':
            case 'EC':
            case 'GT':
            case 'CU':
                if (language !== userCountry) {
                    redirectToCountry('https://insane-bh.space/es?country=', userCountry);
                }
                break;
            case 'PT':
            case 'BR':
            case 'AO':
            case 'MZ':
            case 'CV':
            case 'GW':
            case 'ST':
            case 'GQ':
            case 'TL':
                if (language !== userCountry) {
                    redirectToCountry('https://insane-bh.space/pt?country=', userCountry);
                }
                break;
            default:
                if (hasDefaultCaseExecuted) {
                    // Default case already executed once, handle the situation accordingly
                    console.log('Country code not supported');
                    // You can display an error message to the user or redirect to a default URL
                } else {
                    hasDefaultCaseExecuted = true; // Set the flag to indicate that the default case has executed
                    // Perform the redirection again
                    redirectToCountry('https://insane-bh.space/?country=', userCountry);
                }
                break;
        }
    }
    
    function redirectToCountry(baseUrl, country) {
        Cookies.set('language', country, {
            expires: 365,
            path: '/',
            domain: 'insane-bh.space',
            secure: true,
            sameSite: 'Strict',
        });
        window.location.href = baseUrl + country;
    } 
    */   